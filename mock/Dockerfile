FROM fedora:28

RUN dnf -y update \
        && dnf -y install python3-tornado \
        && rm -rf /var/cache/dnf/*

ADD entrypoint.sh /mock/
ADD *.py /mock/

RUN adduser --gid 0 -d /mock --no-create-home -c 'Red Hat Insights' insights
USER insights

EXPOSE 8080

CMD ["/mock/entrypoint.sh"]
