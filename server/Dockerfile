FROM fedora:28

RUN dnf -y update \
        && dnf -y install python3-tornado \
        && rm -rf /var/cache/dnf/*

ADD entrypoint.sh /server/
ADD *.py /server/

RUN adduser --gid 0 -d /server --no-create-home -c 'Red Hat Insights' insights
USER insights

EXPOSE 8000

CMD ["/server/entrypoint.sh"]
